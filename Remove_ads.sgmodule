#!name=ÂéªÈô§ÂπøÂëä
#!desc=Êõ¥Êñ∞Êó∂Èó¥ 2023-10-28
#!system=ios

[General]
# > ‰ª£ÁêÜÊ£ÄÊµã
skip-proxy = %APPEND% www.baidu.com,yunbusiness.ccb.com,wxh.wo.cn,gate.lagou.com,www.abchina.com.cn,www.shanbay.com,login-service.mobile-bank.psbc.com,mobile-bank.psbc.com

[Rule]
# > Boxjs ‰ª£ÁêÜ
DOMAIN-KEYWORD,jsdelivr.net,ùó£ùó•ùó¢ùó´ùó¨
# > Sub-Store ‰ª£ÁêÜ
DOMAIN-KEYWORD,vercel.app,ùó£ùó•ùó¢ùó´ùó¨
# > ÂøÉÂä®Ê∫ê‰ª£ÁêÜ
DOMAIN-SUFFIX,applehub.cn,ùó£ùó•ùó¢ùó´ùó¨
# > Siri‰∏éÊêúÁ¥¢ ‰ª£ÁêÜ
PROCESS-NAME,LookupViewService,ùó£ùó•ùó¢ùó´ùó¨
PROCESS-NAME,/System/Library/PrivateFrameworks/Lookup.framework/Versions/A/XPCServices/LookupViewService.xpc/Contents/MacOS/LookupViewService,ùó£ùó•ùó¢ùó´ùó¨
DOMAIN,lookup-api.apple.com,ùó£ùó•ùó¢ùó´ùó¨
DOMAIN,lookup-api.apple.com.edgekey.net,ùó£ùó•ùó¢ùó´ùó¨
DOMAIN,e16991.b.akamaiedge.net,ùó£ùó•ùó¢ùó´ùó¨
# ÈÄöÁî®ÂπøÂëä
DOMAIN-SUFFIX, doubleclick-cn.net, REJECT
DOMAIN-SUFFIX, doubleclick.net, REJECT
# > Safari Èò≤Ë∑≥ËΩ¨
DOMAIN,app-site-association.cdn-apple.com,REJECT
DOMAIN,zh.mk,PROXY
# > Áà±Â•áËâ∫ ÂéªÂπøÂëä
DOMAIN-SUFFIX,cupid.iqiyi.com,REJECT
# > ‰ºòÈÖ∑ ÂéªÂπøÂëä
DOMAIN, iyes.youku.com,REJECT
URL-REGEX,^http:\/\/.*\.cp31\.ott\.cibntv\.net\/youku\/,REJECT-TINYGIF
# > ‰∫¨‰∏ú ÂéªÂπøÂëä
DOMAIN, blackhole.m.jd.com, REJECT
URL-REGEX,^https:\/\/api\.m\.jd\.com\/client\.action\?functionId=(start|uniformRecommend),REJECT
#  > ‰∫¨‰∏úÊûÅÈÄüÁâà ÂéªÂπøÂëä
URL-REGEX,https://api.m.jd.com/client.action\?functionId=lite_advertising,REJECT-TINYGIF
URL-REGEX,^https:\/\/img11.360buyimg.com\/dl\/jfs\/t1\/195304\/29\/12317\/268480\/60e6fd21E02a8fb2a\/,REJECT-TINYGIF
# > ‰∫¨Âñú ÂéªÂºÄÂ±è
URL-REGEX,^https:\/\/api\.m\.jd\.com\/api\?functionId=delivery_show$,REJECT
URL-REGEX,^http:\/\/m\.360buyimg\.com\/deliveryadmin\/jfs\/t1,REJECT
#  > ‰∫¨‰∏úÈáëËûç ÂéªÂπøÂëä
URL-REGEX,^https?:\/\/ms\.jr\.jd\.com\/gw\/generic\/aladdin\/(new)?na\/m\/getLoadingPicture,REJECT
# > ‰∫¨‰∏úËØª‰π¶ÂéªÂºÄÂ±è
URL-REGEX,https://jdread-api.jd.com/jdread/api/channel/module/opens,REJECT
URL-REGEX,https://jdread-api.jd.com/jdread/api/popup,REJECT
# > ËÖæËÆØËßÜÈ¢ë ÂéªÂºÄÂ±è
URL-REGEX,^https:\/\/ossgw\.alicdn\.com\/creatives-assets/prod/feupload/user,REJECT
IP-CIDR,47.110.187.87/32,REJECT,no-resolve
OR,((DOMAIN,pgdt.gtimg.cn), (AND,((USER-AGENT,live4iphoneRel*), (IP-CIDR,0.0.0.0/0,no-resolve)))),REJECT-DROP
# > ‰∫§ÁÆ°12123 ÂéªÂπøÂëä
URL-REGEX,^https:\/\/gab\.122\.gov\.cn\/eapp\/m\/sysquery\/adver$,REJECT
# > Â∞èÁ±≥ËøêÂä® ÂéªÂπøÂëä 
URL-REGEX,^https:\/\/api-mifit-cn2\.huami\.com\/discovery\/mi\/cards\/startpage_ad,REJECT
# > ‰∫ëÈó™‰ªò ÂéªÂπøÂëä
URL-REGEX,^https:\/\/wallet\.95516\.com\/s\/wl\/icon\/long,REJECT
# > IT‰πãÂÆ∂ ÂéªÂπøÂëä
URL-REGEX,^https:\/\/api\.zuihuimai\.com,REJECT
# > ÁæéÂõ¢ ÂéªÂπøÂëä
URL-REGEX,^https:\/\/flowplus\.meituan\.net\/v1\/mss_\w+\/linglong\/\d+\.jpg$,REJECT
URL-REGEX,^https:\/\/s3plus\.meituan\.net\/v1\/mss_\w+\/(brandcpt-vedio|waimai-alita)\/\w+\.zip$,REJECT
# > ÊãºÂ§öÂ§ö ÂéªÂºÄÂ±è
URL-REGEX,^https?:\/\/api\.(pinduoduo|yangkeduo)\.com\/api\/cappuccino\/splash,REJECT
# > Â®ÅÈîã ÂéªÂπøÂëä
URL-REGEX,^https:\/\/api\.wfdata\.club\/v2\/yesfeng\/(infoCenterAd|yesList),REJECT
# > ÊãõÂïÜÈì∂Ë°å
URL-REGEX,^https:\/\/mbmodule-openapi\.paas\.cmbchina\.com\/graphic\/v2\/module\/graphic,REJECT
URL-REGEX,^https?:\/\/webappcfg\.paas\.cmbchina\.com\/v\d\/func\/getmarketconfig,REJECT
# > ËÆ¢Á•®Âä©Êâã
URL-REGEX,^https?:\/\/m\.ctrip\.com\/restapi\/[\w\/]+tripAds,REJECT
URL-REGEX,^https?:\/\/m\.ctrip\.com\/restapi\/soa2\/\d+\/json\/getAdsList,REJECT
# > ÂòÄÂóíÂá∫Ë°å
URL-REGEX,^https?:\/\/capis(-slb)?\.didapinche\.com\/ad\/,REJECT
# > ‰π∞ÂçïÂêß
URL-REGEX,^https?:\/\/creditcardapp\.bankcomm\.cn\/mappweb_interface\/common\/(qryPopAds|qryLaunchAds)\.do ,REJECT
# > ÁôæÂ∫¶ËæìÂÖ•Ê≥ï
URL-REGEX,^https?:\/\/mime\.baidu\.com\/v5\/start_screen_ads/list,REJECT
URL-REGEX,^https?:\/\/mime\.baidu\.com\/sapi\/v1\/lccorpus\/(applist|pannellist),REJECT
URL-REGEX,^https?:\/\/mime\.baidu\.com\/sapi\/v1\/(circle\/joinedlist|lccorpus\/usercorpussync|aihelpactivity\/aihelpresource),REJECT
URL-REGEX,^https?:\/\/mime\.baidu\.com\/commer\/pocket_api\/enterprise_list,REJECT
URL-REGEX,^https?:\/\/mbd\.baidu\.com\/ccs\/v1\/start\/confsync\?appname=baidu_input,REJECT
URL-REGEX,^https:\/\/mime\.baidu\.com\/v5\/(fb\/st\?logtype|(notiv3|cellloc_noti|noti_cloudswitch_noti)\/info),REJECT
# > Ëà™ÊóÖÁ∫µÊ®™ *.umetrip.com, 
URL-REGEX,^http?:\/\/(home|umerp|discardrp|startup)\.umetrip\.com\/gateway\/api\/umetrip\/native, REJECT
# > KFCÂºÄÂ±èÂπøÂëä
URL-REGEX,^https:\/\/res\.kfc\.com\.cn\/advertisement, REJECT
URL-REGEX,^https?:\/\/res\.kfc\.com\.cn\/CRM\/kfcad\/apphome6\/\w+\.json\?, REJECT
URL-REGEX,^https?:\/\/res\.kfc\.com\.cn\/CRM\/kfcad\/apphome5\/apphome, REJECT
# > È•ø‰∫Ü‰πàÂºÄÂ±èÂπøÂëä cube.elemecdn.com, nr-op.elemecdn.com
URL-REGEX,^https:\/\/(nr-op|cube)\.elemecdn\.com\/.+\.jpeg\?x-oss-process=image\/resize,m_fill,w_\d{4,},h_\d{4,}\/($|format,webp\/$), REJECT
# ÊãõË°åÊéå‰∏äÁîüÊ¥ª (ÈúÄÂç∏ËΩΩÈáçË£Ö)
# ÂºÄÂ±èÂπøÂëä az1mbasecc.bas.cmbchina.com
URL-REGEX,^https?:\/\/az1mbasecc\.bas\.cmbchina\.com\/Edge\/api\/mlife\.clientface\.clientservice\.api\.advertiseService\/preCacheAdvertiseSec, REJECT
#ËÆæÁΩÆÊ†èÁõÆÂÜÖÂπøÂëä intellicc.bas.cmbchina.com
URL-REGEX,^https?:\/\/intellicc\.bas\.cmbchina\.com\/Edge\/api\/mlife\.intelli\.render\.api\.render\/getDynamicDataSec, REJECT
# > È£ûÁå™ÂéªÂºÄÂ±èÂπøÂëä
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.fliggy\.crm\.screen\.(allresource|predict) ,REJECT
# > Ê∑òÁ•®Á•®ÂºÄÂ±è
URL-REGEX,^https?:\/\/acs\.m\.taobao\.com\/gw\/mtop\.film\.mtopadvertiseapi\.(queryadvertise|queryloadingbanner)\/, REJECT
# > ÈòøÈáåÂ∑¥Â∑¥ //acs.m.taobao.com, guide-acs.m.taobao.com
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.alibaba\.advertisementservice\.getadv, REJECT
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.alimama\.etao\.config\.query\/.+?etao_advertise, REJECT
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.alimusic\.common\.mobileservice\.startinit, REJECT
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.etao\.noah\.query\/.+tao_splash, REJECT
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.film\.mtopadvertiseapi\.queryadvertise, REJECT
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.o2o\.ad\.gateway\.get, REJECT
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.taobao\.idle\.home\.welcome, REJECT
URL-REGEX,^https:\/\/acs\.m\.taobao\.com\/gw\/mtop\.trip\.activity\.querytmsresources, REJECT
URL-REGEX,^https:\/\/guide-acs\.m\.taobao\.com\/gw\/mtop\.cainiao\.adx\.flyad\.getad, REJECT
URL-REGEX,^https:\/\/guide-acs\.m\.taobao\.com\/gw\/mtop\.taobao\.(volvo\.secondfloor\.getconfig|wireless\.home\.newface\.awesome\.get), REJECT
# > Ëê§Áü≥‰∫ë
URL-REGEX,^https?:\/\/i\.ys7\.com\/api\/ads\/, REJECT
# > Âª∫ËÆæÈì∂Ë°å
URL-REGEX,^http:\/\/imageadv\.ccb\.com\/adpic\/nctm\/ad\.png,REJECT


[Map Local]
# > ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑Â∫ïÈÉ® mp.weixin.qq.com
^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad data="https://raw.githubusercontent.com/Keywos/rule/main/mocks//WeChat.json"


[URL Rewrite]
# > ‰∫¨‰∏úÊûÅÈÄüÁâàÂéªÂºπÁ™ó
^https?:\/\/api\.m\.jd\.com\/client\.action\?functionId=lite_SmartPush response-body pushData response-body ddgksf2013
^https?:\/\/api\.m\.jd\.com\/client\.action\?functionId=lite_advertising url response-body jdLiteAdvertisingVO response-body ddgksf2013


[Script]
# > ÂπøÂëäËÅîÁõü
ÂπøÂëäËÅîÁõüjson = type=http-response,pattern=^https:\/\/((api-access\.pangolin-sdk-toutiao|is\.snssdk)\.com\/api\/ad\/union\/sdk\/get_ads|open\.e\.kuaishou\.com\/rest\/e\/v3\/open\/univ$|mi\.gdt\.qq\.com\/gdt_mview\.fcg\?),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/adsense.js
# > 12306ÂéªÂºÄÂ±èÂπøÂëä
12306ÂºÄÂ±è = type=http-request, pattern=^https?:\/\/ad\.12306\.cn\/ad\/ser\/getAdList, requires-body=true, max-size=3145728, script-path=https://github.com/ddgksf2013/Scripts/raw/master/12306.js, timeout=60, script-update-interval=0


[MITM]
hostname = %APPEND% *.360buyimg.com, ms.jr.jd.com, jdread-api.jd.com, ossgw.alicdn.com, gab.122.gov.cn, api-mifit-cn2.huami.com, wallet.95516.com, api.zuihuimai.com, flowplus.meituan.net, s3plus.meituan.net, api.pinduoduo.com, api.yangkeduo.com, api.wfdata.club, *.cmbchina.com, m.ctrip.com, capis(-slb)?.didapinche.com, creditcardapp.bankcomm.cn, mime.baidu.com, mbd.baidu.com, *.umetrip.com, res.kfc.com.cn, cube.elemecdn.com, nr-op.elemecdn.com, az1mbasecc.bas.cmbchina.com, intellicc.bas.cmbchina.com, acs.m.taobao.com, guide-acs.m.taobao.com, gw.alicdn.com, heic.alicdn.com, i.ys7.com, mp.weixin.qq.com, api-access.pangolin-sdk-toutiao.com, is.snssdk.com, mi.gdt.qq.com, open.e.kuaishou.com, imageadv.ccb.com, ad.12306.cn 

